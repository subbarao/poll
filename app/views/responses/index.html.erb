<% a = 0 %>

<% District.all.order("name").each do |district| %>
    <%= link_to district.name, response_path(district),  class: "btn btn-mini btn-warning " %>
    <span class="badge badge-important"> <%= Seat.where(district_id: district).count %></span>
<% end %>
<%= link_to "ALL", responses_path, class: "btn btn-small btn-primary active" %>
<hr>
<table class="table table-condensed table-bordered">
  <thead>
    <tr bgcolor="#a9a9a9">
      <th>Sl</th>
      <th>Name</th>
      <th>District</th>
      <th>Incumbent</th>
      <th>Vote</th>
    </tr>
  </thead>

  <tbody>
    <% @seats.each do |mla| %>
      <tr>
        <td> <%= a += 1 %> </td>
        <td><%= mla.name %></td>
        <td><%= mla.district.name %></td>
        <td><%= mla.incumbent %></td>

        <% if  current_user %>
          <% if selected = current_user.responses.where(seat: mla).first %>
            <td><%= selected.nomination.candidate %>/ <%= selected.nomination.party.name %></td>
          <% else %>
            <td><%= link_to 'Vote', new_response_path(seat_id: mla) %></td>
          <% end %>
        <% else %>
          <td><%= link_to 'Vote', new_response_path(seat_id: mla) %></td>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>
